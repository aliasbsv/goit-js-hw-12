{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/err.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getImages(imageName, page = 1) {\n  const params = {\n    key: '44394312-8b8108d4f3ae97cbc0f498bf3',\n    q: imageName,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: page,\n  };\n  try {\n    const res = await axios.get('', { params });\n    return res.data;\n  } catch (err) {\n    console.log(err);\n  }\n}\n\n\n\n\n","//Functions for displaying interface elements.\nexport  function imageTemplate(el) {\n  return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${el.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${el.webformatURL}\" alt=\"${el.tags}\" />\n        </a>\n\n        <ul class=\"property\">\n          <li class=\"property__item\">\n            <p class=\"property__name\">Likes</p>\n            <p class=\"item-prop__quantity\">${el.likes}</p>\n          </li>\n          <li class=\"property__item\">\n            <p class=\"property__name\">Views</p>\n            <p class=\"item-prop__quantity\">${el.views}</p>\n          </li>\n          <li class=\"property__item\">\n            <p class=\"property__name\">Comments</p>\n            <p class=\"item-prop__quantity\">${el.comments}</p>\n          </li>\n          <li class=\"property__item\">\n            <p class=\"property__name\">Downloads</p>\n            <p class=\"item-prop__quantity\">${el.downloads}</p>\n          </li>\n        </ul>\n      </li>`;\n}\n\nexport function imagesTemplate(arr) { \n    return arr.map(imageTemplate).join('\\n');\n}\n\n\nexport function showLoader(loader) {\n  loader.classList.remove('hidden');\n}\n \n\nexport function hideLoader(loader) {\n  loader.classList.add('hidden');\n }","export default \"__VITE_ASSET__33588f56__\"","\nimport { getImages } from \"./js/pixabay-api\";\nimport { hideLoader, imagesTemplate, showLoader } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iconClose from './img/err.svg';\n\nconst formEl = document.querySelector('.search-form');\nconst ulEl = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet page = 1;\nlet query = '';\nlet totalHits = 0;\n\nlet simpleGallery = new SimpleLightbox('.gallery-link', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nsimpleGallery.on('error.simplelightbox', function (e) {\n    console.log(e); \n});\n\n\nfunction showToast(message) {\n    iziToast.show({\n        class: 'izt-toast-message',\n        message: message,\n        messageSize: '12',\n        messageLineHeight: '24',\n        iconUrl: iconClose,\n        messageColor: '#ffffff',\n        backgroundColor: '#b51b1b',\n        position: 'topRight',\n        theme: 'dark',\n        timeout: 2000\n    });\n}\n\n\nfunction smoothScroll() {\n    const cardHeight = ulEl.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n\nasync function fetchImages() {\n    try {\n        showLoader(loader);\n        const data = await getImages(query, page);\n        totalHits = data.totalHits;\n        \n        if (data.hits.length === 0) {\n            ulEl.innerHTML = '';\n            showToast('Sorry, there are no images matching your search query. Please try again!');\n        } else {\n            const markup = imagesTemplate(data.hits);\n            ulEl.innerHTML = markup;\n            simpleGallery.refresh();\n            if (data.hits.length < totalHits) {\n                loadMoreBtn.classList.remove('hidden');\n            } else {\n                loadMoreBtn.classList.add('hidden');\n                showToast(\"We're sorry, but you've reached the end of search results.\");\n            }\n        }\n    } catch (err) {\n        console.log(\"Error\", err);\n        showToast('There was an error loading images. Try again later!');\n    } finally {\n        hideLoader(loader);\n        formEl.reset();\n    }\n}\n\n\nformEl.addEventListener('submit', e => {\n    e.preventDefault();\n    query = e.target.elements.query.value.trim();\n    page = 1;\n\n    if (!query) {\n        return;\n    }\n\n    loadMoreBtn.classList.add('hidden');\n    fetchImages();\n});\n\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    try {\n        showLoader(loader);\n        const data = await getImages(query, page);\n        const markup = imagesTemplate(data.hits);\n        ulEl.insertAdjacentHTML('beforeend', markup);\n        simpleGallery.refresh();\n        smoothScroll();\n        if ((page * 15) >= totalHits) {\n            loadMoreBtn.classList.add('hidden');\n            showToast(\"We're sorry, but you've reached the end of search results.\");\n        }\n    } catch (err) {\n        console.log(\"Error\", err);\n        showToast('There was an error loading images. Try again later!');\n    } finally {\n        hideLoader(loader);\n    }\n}); \n"],"names":["axios","getImages","imageName","page","params","err","imageTemplate","el","imagesTemplate","arr","showLoader","loader","hideLoader","iconClose","formEl","ulEl","loadMoreBtn","query","totalHits","simpleGallery","SimpleLightbox","showToast","message","iziToast","smoothScroll","cardHeight","fetchImages","data","markup"],"mappings":"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"}